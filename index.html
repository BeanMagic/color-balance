<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <title>Color-balance by victusfate</title>
    <script type="text/coffeescript">
        $ ->
            window.bob = new Image();
            window.bob.onload = (evt) ->
                canvas = document.getElementById("screen")
                if canvas.getContext
                    canvas.width = @width
                    canvas.height = @height
                ctx = canvas.getContext("2d")
                ctx.drawImage window.bob, 0, 0
            window.bob.src = "BobRoss.jpg"

            $('#sup').val 83
            $('#mup').val 166
            $('#sr').val 100
            $('#sg').val -100
            $('#sb').val -100
            $('#mr').val -100
            $('#mg').val 100
            $('#mb').val -100
            $('#hr').val -100
            $('#hg').val -100
            $('#hb').val 100
    </script>
    <script type="text/coffeescript" src="cb.coffee"></script> 
    
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Color-balance</h1>
        <h2>image processing for dynamic shadows, midtones, and highlights and color levels</h2>

        <section id="downloads">
          <a href="https://github.com/victusfate/color-balance/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/victusfate/color-balance/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/victusfate/color-balance" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

<!--    <div class="container">
      <section id="main_content">
-->
        <div style="position:relative; float:left; width:100%;">
            <img src="BobRoss.jpg" style="float:left; padding: 20px; width:45%;" />
            <canvas id="screen" width="640px" height = "480px" style="position:relative; float:left; padding: 20px; width:45%;"> 
                <h1>This application requires a HTML5 compliant browser.</h1>
            </canvas>
        </div>
        <div style="position:relative; left: 20px; font-size:16px;text-align:left; float:left;">
            <script type="text/javascript">
                function updateform() {
                    var srgb = {},mrgb = {},hrgb = {};
                    srgb.r = $('#sr').val() | 0;
                    srgb.g = $('#sg').val() | 0;
                    srgb.b = $('#sb').val() | 0;
                    mrgb.r = $('#mr').val() | 0;
                    mrgb.g = $('#mg').val() | 0;
                    mrgb.b = $('#mb').val() | 0;
                    hrgb.r = $('#hr').val() | 0;
                    hrgb.g = $('#hg').val() | 0;
                    hrgb.b = $('#hb').val() | 0;
                    console.log(" dvs " + JSON.stringify(srgb) + " dvm " + JSON.stringify(mrgb) + " dvh " + JSON.stringify(hrgb) );
                    window.cb('screen', $('#sup').val(), $('#mup').val(), srgb, mrgb, hrgb );                    
                    return false;
                }
            </script>
            <form id="colorForm" onsubmit="return window.updateform();">  
                <div style="float:right; margin: -10px 10px 0px 0px;">
                    <br/>
                    This is a demo for color balancing:<br/> 
                    shadow upper bound <input id="sup" type="text" value="" />
                    midtones upper bound <input id="mup" type="text" value="" /><br/>
                    (highlights are applied to anything lighter than midtone upper bound)<br/>
                    cyan/red, magenta/green and yellow/blue shadows
                    <input id="sr" type="text" value="" />
                    <input id="sg" type="text" value="" />
                    <input id="sb" type="text" value="" />
                    <br/>
                    cyan/red, magenta/green and yellow/blue midtones
                    <input id="mr" type="text" value="" />
                    <input id="mg" type="text" value="" />
                    <input id="mb" type="text" value="" />
                    <br/>
                    cyan/red, magenta/green and yellow/blue highlights
                    <input id="hr" type="text" value="" />
                    <input id="hg" type="text" value="" />
                    <input id="hb" type="text" value="" />
                    <br/>
                    <button onclick="" type="submit" class="mygrad">submit</button>
                </div>
            </form>
        </div>

        <script type='text/javascript' src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
        <script>
            !window.jQuery && document.write('<script src="jquery-1.7.2.min.js"><\/script>');
        </script>
        <script type='text/javascript' src="http://coffeescript.org/extras/coffee-script.js"></script>  
        <script>
            !window.CoffeeScript && document.write('<script src="coffee-script.js"><\/script>');
        </script>
      
<!--       </section>
    </container>
    -->
  </body>
</html>
